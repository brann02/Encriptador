<!DOCTYPE html>

<html lang="es">
    
    <head>
        <meta charset="UTF-8"> 
        <title>Encriptador</title>
        <link rel="stylesheet" href="reset.css">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
        <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
    </head>

    <body>
    
        <main>
            <div class="logo">
                <img class="logo" src="Imagenes/Logo.png" alt="logo alura">
            </div>

            <div class="input">
                <textarea class= "text" id= "text" placeholder="Ingrese el texto aquÃ­"></textarea>
                <div>
                    <img  class= "sign" src="Imagenes/signo.jpg"  alt="signo">
                    <p>Solo minusculas y sin acentos</p>
                </div>
                <div class="button">
                    <button disabled type="button" class="btnenc" id="btnenc">Encriptar</button>
                    <button disabled type="button" class="btndes" id="btndes">Desencriptar</button>
                </div>

            </div>
                <div class="output">
                    <div class="container">
                        <img id="img" src="Imagenes/robot.jpg"  alt="robot" > 
                        <p id="text1">Ningun mensaje fue encontrado</p>
                        <p id="text2">Ingrese el texto que desees encriptar o desencriptar</p>
                        <textarea  id="resultado" readonly="readonly"></textarea>
                        <button type="button" id="btncopiar">Copiar</button>
                </div>

            </div> 
        </main>

        <footer>
            <p>Desarrollado por Brando</p>
        </footer>

    </body>
    
    <script>
        var btn = document.getElementById("btnenc");
var btn2 = document.getElementById("btndes");
var btn3 = document.getElementById("btncopiar");
var texto = document.getElementById("text")
texto.addEventListener("input", detectarInput); //Registra el evento cuando se escribe en la caja de texto

//Permite la funcionalidad del click
window.onload = function(){
    this.click();
}
function click(){
    btn.onclick = encriptar;
    btn2.onclick = desencriptar;
    btn3.onclick = copiar;
} 
//Funciones de los botones
function encriptar() {
    let texto = document.getElementById("text").value.toLowerCase();
    let inputtext = texto.replace(/e/img, "enter");
    inputtext = inputtext.replace(/o/img, "ober");
    inputtext = inputtext.replace(/i/img, "imes");
    inputtext = inputtext.replace(/a/img,"ai");
    inputtext = inputtext.replace(/u/img, "ufat");
    inputtext = inputtext.normalize('NFD').replace(/[\u0300-\u036f]/g,""); // Quita los acentos.
    document.getElementById("resultado").innerHTML = inputtext;
    document.getElementById("resultado").style.display = ""
    document.getElementById("img").style.display = ""; //Desvanece los elementos de la derecha para msotrar el resultado
    document.getElementById("text1").style.display = "none";
    document.getElementById("text2").style.display = "none";
    document.getElementById("btncopiar").style.display = "inline";  
}
function desencriptar() {
    let texto = document.getElementById("text").value.toLowerCase();
    let inputtext = texto.replace(/enter/img, "e");
    inputtext = inputtext.replace(/ober/img, "o");
    inputtext = inputtext.replace(/imes/img, "i");
    inputtext = inputtext.replace(/ai/img,"a");
    inputtext = inputtext.replace(/ufat/img, "u");
    inputtext = inputtext.normalize('NFD').replace(/[\u0300-\u036f]/g,"");
    document.getElementById("resultado").innerHTML = inputtext;
    document.getElementById("img").style.display = "";
    document.getElementById("text1").style.display = "none";
    document.getElementById("text2").style.display = "none";
    document.getElementById("btncopiar").style.display = "inline";
}
function copiar () {
    var contenido =document.getElementById("resultado");
    contenido.select();
    document.execCommand("copy");
}
// Detecta cuando se copia texto y los botones.
function activarBotones () {
    btn.disabled = false;
    btn.style.pointerEvents = 'auto';
    btn2.disabled = false;
    btn2.style.pointerEvents = 'auto';
    btn3.style.pointerEvents = 'auto';
}
function desactivarBotones () {
    btn.disabled = true;
    btn.style.pointerEvents = 'none';
    btn2.disabled = true;
    btn2.style.pointerEvents = 'none';
    btn3.style.pointerEvents = 'auto';
}
function detectarInput () {
    if (text.value) {
        activarBotones();
    } else {
        desactivarBotones();
    }
}
    </script>

</html>